'use strict';

var router = function () {

    var components = {
        dialogs: window.conversationComponent
    };

    function Router() {
        var _this = this;

        this.prevComponent;

        if (window.location.pathname !== '/') {
            var path = window.location.pathname.replace('/', '');
        }

        // listen nav controls
        window.onpopstate = history.onpushstate = function (e) {
            if (e.state !== null) {
                _this.renderComponent(e.state.component);
            } else {
                _this.renderComponent('blank');
            }
        };
        this.renderComponent = function (componentName) {
            switch (componentName.toLowerCase()) {
                case 'messages':
                    var messages = new components.dialogs();
                    history.pushState({ component: componentName }, componentName, componentName.toLowerCase());
                    this.prevComponent = messages;
                    break;
                case 'blank':
                    this.prevComponent.destroy();
                    break;
            }
        };
    }

    return Router;
}();